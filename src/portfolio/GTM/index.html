<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>Grand Theft Manual!</title>
    <script src="//cdn.jsdelivr.net/npm/phaser@3.22.0/dist/phaser.js"></script>
    <style>
        body {
            margin: auto;
            background-color: black;
        }

        a,
        div {
            color: white;
        }
    </style>
</head>

<body>

    <script type="module" src="game.js"></script>
    <!--
This game was created by UltimateProGrammer. Music by: 
Zona Norte by J.Lang (c) copyright 2019 Licensed under a Creative Commons Attribution Noncommercial  (3.0) license. http://dig.ccmixter.org/files/djlang59/60850 Ft: Reiswerk
I dunno by grapes (c) copyright 2008 Licensed under a Creative Commons Attribution (3.0) license. http://dig.ccmixter.org/files/grapes/16626 Ft: J Lang, Morusque
-->
    <script>
        var config;
        var game;
        var missions = ['Killer!', 'Visit Your Apartment', 'Buy A Gun', 'Buy Food'];
        var mission = 0;
        var chosenGun = 10;
        // controls
        var cursors;
        var arrows;
        var joysticks;

        var player;
        // Movement
        var xVelocity;
        var yVelocity;

        var gunPicked;
        var gun;
        var gunDelay;
        var gunDamage;
        var pointer;
        var bullets;
        var touchX;
        var touchY;
        var car;
        var shootable;
        var staticG;
        // Car
        var inCar;
        var carXSpeed;
        var carYSpeed;
        var cam;
        var music;
        var bullets;
        var targetHealth;
        var target;
        var helpText;
        var carAcceleration;
        var citizens;
        var policeRoom;
        var star1;
        var star2;
        var star3;
        var star4;
        var star5;
        var stars = 0;
        var playerHealth = 200;
        var playerMoney = 1000;
        var moneyText;
        var infoG;
        var inNewCar = false;
        var apartment;
        var apartmentColliders1;
        var apartmentStairs;
        var apartmentFloor = 0;
        var chair;
        var apartmentColliders2;
        var clothesStuff;
        var clothesGroup;
        var missionText;
        var clothesShoppingCartTotal = 0;
        var thingsInCart = false;
        var predatoryLoanAmount = 0;
        var banner;
        var chineseRoom;
        var chineseRoomG;
        var checkoutLocation;
        var chineseShoppingCartTotal = 0;

        // Global Functions:
        function ePressed() {
            if (inCar === true) {
                inCar = false;
                player.enableBody(true, true);

                if (car.angle != 180 && car.angle !== 0) {
                    if (car.angle == 90) {
                        car.angle = 0;
                    } else if (car.angle == -90) {
                        car.angle = 180;
                    }
                }

                if (car.angle === 0) {
                    player.x = car.x - 100;
                    player.y = car.y - 80;
                } else {
                    player.x = car.x + 100;
                    player.y = car.y + 80;
                }


                player.setVisible(true);
                cam.stopFollow();
                cam.startFollow(player, true);
            }
        }

        function missionComplete(mis, go) {
            mission = 0;
            if (mis === 0) { // killer
                banner.setTexture('killerM');
            } else if (mis == 1) { // killer
                banner.setTexture('visitAptM');
            } else if (mis == 2) { // killer
                banner.setTexture('gunBuyM');
            } else if (mis == 3) { // killer
                banner.setTexture('buyFoodM');
            }

            missions = ['Killer!', 'Visit Your Apartment', 'Buy A Gun', 'Buy Food'];

            banner.alpha = 1;
            go.time.addEvent({
                delay: 10,
                callback: () => {
                    banner.alpha -= 0.005;
                },
                repeat: 200
            });
        }

        function kill(object) {
            object.destroy();
        }

    </script>

</html>